import iRealReader from 'ireal-reader';

describe('iReal Reader Tests', () => {
  test('parses valid iReal Pro HTML', () => {
    const html = "irealb://%53%69%72%20%44%75%6B%65=%57%6F%6E%64%65%72%20%53%74%65%76%69%65==%53%6F%75%6C=%42==%31%72%33%34%4C%62%4B%63%75%37%31%4E%7C%51%79%34%42%58%79%51%7C%51%79%58%42%41%2A%53%7B%7D%51%79%58%37%46%23%7C%51%79%58%47%7C%51%79%58%37%2D%23%47%7C%47%23%2D%37%58%34%54%69%2A%7B%37%44%20,%37%46%23%37%58%79%45%42%2A%5B%5D%20%37%46%20%37%23%46%7C%51%58%79%47%32%4E%5A%4C%20%51%79%58%51%79%58%7D%51%37,%20%45%62%7C%51%79%58%47%37%46(%20,%5A%44%37%20%45%45(%20,%37%44%5A%4C%37%23%43%20%37%44%37%20%62%45%20%37%45%7C%51%79%58%37%45%20%37%62%62%37)%45%37%4C%37%23%43%20%7D%20%51,%73%79%51%5D%7B%2A%20%37%2D%23%43%6C%7C,%23%44%2F%42%73%20%5E%20%45%7C%51%79%58%37%2D%46%7C%51%79%58%42%43%46%23%37%73%75%58%37%23%46)%51%43%2A%7B%5D,%73%6E%7C%6E%4C%78%3E%61%64%6F%43%20%6C%61%20%2E%53%2E%3C%44%5A%4C%6E%5A%4C%78%5A%4C%6E%5A%4C%78%5A%4C%5A%6E%46%23,%42%6C%44%2A%5B%6E%73,%42%6C%7C%46%2D%37%58%3E%78%33%3C%73%75%73%37%23%46%20%37%2D%23%6C%43%7C,%23%44%2F%42%73%20%20%5E%45%7C%51%79%20%7D%5B%2A%44%51%79%58%42%6C%7C,%23%44%2F%4C%5A%6E%4C%5A%45%7C%51%79%58%37%2D%46%7C%51%79%58%42%6C%2A%43%7B%5D%23%46%6E%5A%4C%78%5A%4C%6E%5A%4C%78%5E%20%20%73%42%78%5A%4C%6E%7C%6C%43%23%2D%37%20%46%23%37%73%75%73,%3C%36%78%3E%20%7D%5B%2A%44%42,%73%6E%7C%6E%4C%5A%78%4C%5A%6E%4C%5A%78%4C%5A%6E%4C%5A%78%4C%5A%6E%46%23%5A%20=%50%6F%70%2D%53%6F%75%6C=%31%30%35=%31===a";
    const result = iRealReader(html);

    expect(result).toBeDefined();
    expect(Array.isArray(result.songs)).toBe(true);
    expect(result.songs[0]).toMatchObject({
      title: 'Sir Duke',
      composer: 'Wonder Stevie',
    });
  });
});

